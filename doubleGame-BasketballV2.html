<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<title>åŒäººæŠ•ç¯® Â· çº¯å‡€å¯¹æŠ—</title>
	<style>
		* {
			box-sizing: border-box;
			user-select: none;
			-webkit-tap-highlight-color: transparent;
		}
		body {
			margin: 0;
			min-height: 100vh;
			background: linear-gradient(145deg, #1a3a5f, #0a2a4a);
			display: flex;
			justify-content: center;
			align-items: center;
			font-family: 'Segoe UI', Roboto, sans-serif;
			padding: 10px;
			touch-action: pan-y pinch-zoom;
		}
		.game-container {
			width: 100%;
			max-width: 500px;
			background: #2a4a6a;
			border-radius: 40px;
			padding: 20px;
			box-shadow: 0 20px 35px #00000080;
			border: 3px solid #ffd700;
		}
		.header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			color: #ffffff;
			font-size: 1.2rem;
			font-weight: 700;
			margin-bottom: 15px;
			padding: 0 10px;
		}
		.score-board {
			background: #0a2a4a;
			padding: 8px 30px;
			border-radius: 40px;
			display: flex;
			gap: 40px;
			border: 2px solid #ffd700;
		}
		.score-left, .score-right {
			display: flex;
			align-items: center;
			gap: 8px;
			font-size: 1.3rem;
			color: white;
		}
		.score-left span, .score-right span {
			font-size: 2rem;
			color: #ffd700;
			min-width: 40px;
			text-align: center;
		}
		.timer-box {
			background: #0a0a0a;
			color: #ffd700;
			padding: 5px 20px;
			border-radius: 40px;
			font-size: 1.5rem;
			font-weight: bold;
			border: 2px solid #ffd700;
		}
		.phase-box {
			background: #2a4a6a;
			color: #ffd700;
			padding: 5px 15px;
			border-radius: 30px;
			font-size: 1rem;
			border: 1px solid #ffd700;
		}
		canvas {
			display: block;
			margin: 0 auto;
			width: 100%;
			aspect-ratio: 1/1;
			border-radius: 30px;
			background: #3a6a8a;
			box-shadow: inset 0 0 30px #00000099, 0 10px 15px black;
			border: 4px solid #ffd700;
			touch-action: none;
		}
		.controls-row {
			display: flex;
			justify-content: space-between;
			margin-top: 20px;
			gap: 15px;
		}
		.player-controls {
			flex: 1;
			display: flex;
			flex-direction: column;
			align-items: center;
			background: #0a2a4a;
			border-radius: 30px;
			padding: 15px 10px;
			border: 2px solid #ffd700;
		}
		.player-label {
			color: #ffffff;
			font-weight: bold;
			margin-bottom: 12px;
			font-size: 1.1rem;
		}
		.player-label.left {
			color: #3b82f6;
		}
		.player-label.right {
			color: #dc2626;
		}
		.player-controls.left {
			border-color: #3b82f6;
		}
		.player-controls.right {
			border-color: #dc2626;
		}
		
		/* ä¸‰é”®å¸ƒå±€ */
		.three-keys {
			display: grid;
			grid-template-columns: 1fr 1fr 1fr;
			gap: 8px;
			width: 100%;
		}
		.key-left {
			grid-column: 1;
			grid-row: 1;
		}
		.key-shoot {
			grid-column: 2;
			grid-row: 1;
		}
		.key-right {
			grid-column: 3;
			grid-row: 1;
		}
		
		.ctrl-btn {
			background: #2d4b6e;
			border: none;
			color: white;
			font-size: 1.8rem;
			font-weight: bold;
			aspect-ratio: 1/1;
			width: 100%;
			border-radius: 20px;
			box-shadow: 0 5px 0 #0e2637;
			transition: 0.05s;
			display: flex;
			align-items: center;
			justify-content: center;
			touch-action: manipulation;
			cursor: pointer;
			-webkit-tap-highlight-color: transparent;
		}
		.ctrl-btn:active {
			transform: translateY(4px);
			box-shadow: 0 1px 0 #0e2637;
		}
		.ctrl-btn.left-color {
			background: #3b82f6;
		}
		.ctrl-btn.right-color {
			background: #dc2626;
		}
		.shoot-btn {
			background: #ffd700;
			color: #1e2f47;
			font-size: 1.5rem;
		}
		.footer {
			text-align: center;
			margin-top: 15px;
			color: #ffffff;
			font-size: 0.9rem;
		}
		.victory-message {
			position: fixed;
			top: 50%;
			left: 50%;
			transform: translate(-50%, -50%);
			background: rgba(0,0,0,0.9);
			color: gold;
			font-size: 2rem;
			font-weight: bold;
			padding: 30px 50px;
			border-radius: 60px;
			border: 4px solid gold;
			z-index: 1000;
			display: none;
			text-align: center;
			backdrop-filter: blur(10px);
		}
		.restart-btn {
			background: #ffd700;
			border: none;
			color: #1e2f47;
			font-size: 1.2rem;
			padding: 10px 30px;
			border-radius: 40px;
			margin-top: 15px;
			font-weight: bold;
			cursor: pointer;
		}
	</style>
</head>
<body>
	<div class="victory-message" id="victoryMessage">
		ğŸ† è·èƒœ ğŸ†
		<div><button class="restart-btn" onclick="location.reload()">å†ç©ä¸€å±€</button></div>
	</div>

	<div class="game-container">
		<div class="header">
			<span>ğŸ€ åŒäººæŠ•ç¯® Â· ç‹¬ç«‹åŒç­</span>
			<div class="timer-box" id="timer">01:00</div>
		</div>
		<div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
			<div class="phase-box" id="phaseDisplay">âš¡ ç¯®ç­é™æ­¢</div>
			<div class="score-board">
				<div class="score-left">ğŸ”µ <span id="scoreLeft">0</span></div>
				<div class="score-right">ğŸ”´ <span id="scoreRight">0</span></div>
			</div>
		</div>

		<canvas id="gameCanvas" width="400" height="400"></canvas>

		<!-- åŒäººæ§åˆ¶åŒºåŸŸ - ä¸‰é”®å¸ƒå±€ -->
		<div class="controls-row">
			<!-- å·¦ä¾§ç©å®¶ (è“è‰²) - å·¦å³+æŠ•ç¯® -->
			<div class="player-controls left">
				<div class="player-label left">ğŸ‘ˆ è“é˜Ÿ</div>
				<div class="three-keys">
					<div class="key-left">
						<button class="ctrl-btn left-color" id="leftLeft">â¬…ï¸</button>
					</div>
					<div class="key-shoot">
						<button class="ctrl-btn left-color shoot-btn" id="leftShoot">ğŸ€</button>
					</div>
					<div class="key-right">
						<button class="ctrl-btn left-color" id="leftRight">â¡ï¸</button>
					</div>
				</div>
				<div style="margin-top: 5px; color: #a5d8ff; font-size: 0.8rem;">å·¦å³ç§»åŠ¨ Â· ä¸­å¤®æŠ•ç¯®</div>
			</div>

			<!-- å³ä¾§ç©å®¶ (çº¢è‰²) - å·¦å³+æŠ•ç¯® -->
			<div class="player-controls right">
				<div class="player-label right">ğŸ‘‰ çº¢é˜Ÿ</div>
				<div class="three-keys">
					<div class="key-left">
						<button class="ctrl-btn right-color" id="rightLeft">â¬…ï¸</button>
					</div>
					<div class="key-shoot">
						<button class="ctrl-btn right-color shoot-btn" id="rightShoot">ğŸ€</button>
					</div>
					<div class="key-right">
						<button class="ctrl-btn right-color" id="rightRight">â¡ï¸</button>
					</div>
				</div>
				<div style="margin-top: 5px; color: #ffa5a5; font-size: 0.8rem;">å·¦å³ç§»åŠ¨ Â· ä¸­å¤®æŠ•ç¯®</div>
			</div>
		</div>

		<div class="footer">
			å„è‡ªæŠ•ç¯® Â· ä¸èƒ½æŠ¢çƒ Â· å‰30ç§’é™æ­¢ï¼Œå30ç§’ç§»åŠ¨
		</div>
	</div>

	<script>
		(function() {
			const canvas = document.getElementById('gameCanvas');
			const ctx = canvas.getContext('2d');
			const victoryMsg = document.getElementById('victoryMessage');
			const timerEl = document.getElementById('timer');
			const phaseEl = document.getElementById('phaseDisplay');

			// æ¸¸æˆé…ç½®
			const config = {
				playerRadius: 15,
				ballRadius: 6,
				playerSpeed: 4,
				jumpPower: 10,
				totalTime: 60,
				moveStartTime: 30
			};

			// ç¯®ç­ - æ¯äººä¸€ä¸ªç‹¬ç«‹ç¯®ç­
			let leftHoop = {
				x: 80,
				y: 120,
				r: 15,
				vx: 1.5,
				vy: 1,
				phase: 'static'
			};
			
			let rightHoop = {
				x: 320,
				y: 120,
				r: 15,
				vx: -1.2,
				vy: 1.3,
				phase: 'static'
			};

			// çƒå‘˜
			let leftPlayer = {
				x: 80,
				y: 300,
				r: config.playerRadius,
				hasBall: true
			};
			
			let rightPlayer = {
				x: 320,
				y: 300,
				r: config.playerRadius,
				hasBall: true
			};

			// ç¯®çƒ - æ¯äººä¸€ä¸ªç‹¬ç«‹ç¯®çƒ
			let leftBall = {
				x: 80,
				y: 280,
				r: config.ballRadius,
				vx: 0,
				vy: 0,
				active: false,
				inAir: false
			};
			
			let rightBall = {
				x: 320,
				y: 280,
				r: config.ballRadius,
				vx: 0,
				vy: 0,
				active: false,
				inAir: false
			};

			// åˆ†æ•°
			let leftScore = 0;
			let rightScore = 0;

			// è®¡æ—¶
			let timeLeft = config.totalTime;
			let gameActive = true;
			let gameStarted = false;
			let gameInterval = null;

			// åˆ†æ•°æ˜¾ç¤º
			const scoreLeftEl = document.getElementById('scoreLeft');
			const scoreRightEl = document.getElementById('scoreRight');

			// ç§»åŠ¨çŠ¶æ€
			const leftKeys = { left: false, right: false };
			const rightKeys = { left: false, right: false };

			// è§¦æ‘¸ç»‘å®š
			function bindButton(btnId, playerKeys, dir) {
				const btn = document.getElementById(btnId);
				if (!btn) return;
				
				btn.addEventListener('touchstart', (e) => {
					e.preventDefault();
					playerKeys[dir] = true;
				});
				btn.addEventListener('touchend', (e) => {
					e.preventDefault();
					playerKeys[dir] = false;
				});
				btn.addEventListener('touchcancel', (e) => {
					e.preventDefault();
					playerKeys[dir] = false;
				});
				btn.addEventListener('mousedown', (e) => {
					e.preventDefault();
					playerKeys[dir] = true;
				});
				btn.addEventListener('mouseup', (e) => {
					e.preventDefault();
					playerKeys[dir] = false;
				});
				btn.addEventListener('mouseleave', (e) => {
					playerKeys[dir] = false;
				});
			}

			bindButton('leftLeft', leftKeys, 'left');
			bindButton('leftRight', leftKeys, 'right');
			bindButton('rightLeft', rightKeys, 'left');
			bindButton('rightRight', rightKeys, 'right');

			// æŠ•ç¯®
			document.getElementById('leftShoot').addEventListener('touchstart', (e) => {
				e.preventDefault();
				shoot('left');
			});
			document.getElementById('leftShoot').addEventListener('mousedown', (e) => {
				e.preventDefault();
				shoot('left');
			});
			document.getElementById('rightShoot').addEventListener('touchstart', (e) => {
				e.preventDefault();
				shoot('right');
			});
			document.getElementById('rightShoot').addEventListener('mousedown', (e) => {
				e.preventDefault();
				shoot('right');
			});

			function shoot(side) {
				if (!gameActive || !gameStarted) return;
				
				if (side === 'left' && leftPlayer.hasBall && !leftBall.inAir) {
					leftBall.active = true;
					leftBall.inAir = true;
					leftPlayer.hasBall = false;
					
					// æŠ•ç¯®åˆé€Ÿåº¦ï¼ˆå‘ä¸Š+è½»å¾®éšæœºå·¦å³ï¼‰
					leftBall.x = leftPlayer.x;
					leftBall.y = leftPlayer.y - 10;
					leftBall.vx = (Math.random() - 0.5) * 1.5;
					leftBall.vy = -config.jumpPower;
				}
				
				if (side === 'right' && rightPlayer.hasBall && !rightBall.inAir) {
					rightBall.active = true;
					rightBall.inAir = true;
					rightPlayer.hasBall = false;
					
					rightBall.x = rightPlayer.x;
					rightBall.y = rightPlayer.y - 10;
					rightBall.vx = (Math.random() - 0.5) * 1.5;
					rightBall.vy = -config.jumpPower;
				}
			}

			// é‡ç½®æ¸¸æˆ
			function resetGame() {
				leftScore = 0;
				rightScore = 0;
				timeLeft = config.totalTime;
				gameActive = true;
				gameStarted = true;
				
				leftPlayer.hasBall = true;
				rightPlayer.hasBall = true;
				leftBall.inAir = false;
				rightBall.inAir = false;
				
				leftHoop.phase = 'static';
				rightHoop.phase = 'static';
				phaseEl.innerText = 'âš¡ ç¯®ç­é™æ­¢';
				
				scoreLeftEl.innerText = leftScore;
				scoreRightEl.innerText = rightScore;
				
				if (gameInterval) clearInterval(gameInterval);
				gameInterval = setInterval(updateTimer, 1000);
			}

			// æ›´æ–°è®¡æ—¶å™¨
			function updateTimer() {
				if (!gameActive || !gameStarted) return;
				
				timeLeft--;
				const mins = Math.floor(timeLeft / 60);
				const secs = timeLeft % 60;
				timerEl.innerText = `${mins.toString().padStart(2,'0')}:${secs.toString().padStart(2,'0')}`;
				
				// 30ç§’åç¯®ç­å¼€å§‹ç§»åŠ¨
				if (timeLeft === config.moveStartTime) {
					leftHoop.phase = 'moving';
					rightHoop.phase = 'moving';
					phaseEl.innerText = 'ğŸŒ€ ç¯®ç­ç§»åŠ¨';
				}
				
				if (timeLeft <= 0) {
					gameActive = false;
					clearInterval(gameInterval);
					
					let winner = '';
					if (leftScore > rightScore) winner = 'ğŸ† è“é˜Ÿèƒœåˆ© ğŸ†';
					else if (rightScore > leftScore) winner = 'ğŸ† çº¢é˜Ÿèƒœåˆ© ğŸ†';
					else winner = 'ğŸ¤ å¹³å±€';
					
					victoryMsg.style.display = 'block';
					victoryMsg.innerHTML = `${winner}<div><button class="restart-btn" onclick="location.reload()">å†ç©ä¸€å±€</button></div>`;
				}
			}

			// æ›´æ–°çƒå‘˜ä½ç½®
			function updatePlayers() {
				// å·¦çƒå‘˜ç§»åŠ¨
				if (leftKeys.left) leftPlayer.x -= config.playerSpeed;
				if (leftKeys.right) leftPlayer.x += config.playerSpeed;
				
				// å³çƒå‘˜ç§»åŠ¨
				if (rightKeys.left) rightPlayer.x -= config.playerSpeed;
				if (rightKeys.right) rightPlayer.x += config.playerSpeed;

				// è¾¹ç•Œé™åˆ¶
				leftPlayer.x = Math.max(leftPlayer.r, Math.min(200 - 20, leftPlayer.x));
				rightPlayer.x = Math.max(200 + 20, Math.min(canvas.width - rightPlayer.r, rightPlayer.x));
				
				// çƒå‘˜ä¸èƒ½äº’ç›¸ç©¿è¿‡ï¼ˆä½†ä¸å½±å“çƒï¼‰
				const dx = rightPlayer.x - leftPlayer.x;
				if (dx < leftPlayer.r + rightPlayer.r) {
					if (leftPlayer.x < rightPlayer.x) {
						leftPlayer.x = Math.max(leftPlayer.r, 200 - leftPlayer.r - 5);
						rightPlayer.x = Math.min(canvas.width - rightPlayer.r, 200 + rightPlayer.r + 5);
					}
				}
				
				// å¦‚æœçƒå‘˜æœ‰çƒï¼Œçƒè·Ÿç€çƒå‘˜
				if (leftPlayer.hasBall) {
					leftBall.x = leftPlayer.x;
					leftBall.y = leftPlayer.y - 10;
				}
				if (rightPlayer.hasBall) {
					rightBall.x = rightPlayer.x;
					rightBall.y = rightPlayer.y - 10;
				}
			}

			// æ›´æ–°ç¯®ç­ä½ç½®
			function updateHoops() {
				if (leftHoop.phase === 'moving') {
					leftHoop.x += leftHoop.vx;
					leftHoop.y += leftHoop.vy;
					
					if (leftHoop.x - leftHoop.r < 0 || leftHoop.x + leftHoop.r > 200) {
						leftHoop.vx = -leftHoop.vx;
					}
					if (leftHoop.y - leftHoop.r < 0 || leftHoop.y + leftHoop.r > canvas.height) {
						leftHoop.vy = -leftHoop.vy;
					}
				}
				
				if (rightHoop.phase === 'moving') {
					rightHoop.x += rightHoop.vx;
					rightHoop.y += rightHoop.vy;
					
					if (rightHoop.x - rightHoop.r < 200 || rightHoop.x + rightHoop.r > canvas.width) {
						rightHoop.vx = -rightHoop.vx;
					}
					if (rightHoop.y - rightHoop.r < 0 || rightHoop.y + rightHoop.r > canvas.height) {
						rightHoop.vy = -rightHoop.vy;
					}
				}
			}

			// æ›´æ–°ç¯®çƒ
			function updateBalls() {
				// å·¦ç¯®çƒ
				if (leftBall.inAir) {
					leftBall.vy += 0.3;
					leftBall.x += leftBall.vx;
					leftBall.y += leftBall.vy;
					
					// æ£€æŸ¥è¿›ç¯®ç­ï¼ˆæŠ•è¿›å³ç¯®ç­ï¼‰
					const dx = leftBall.x - rightHoop.x;
					const dy = leftBall.y - rightHoop.y;
					const dist = Math.sqrt(dx*dx + dy*dy);
					
					if (dist < leftBall.r + rightHoop.r && leftBall.vy > 0) {
						leftScore++;
						scoreLeftEl.innerText = leftScore;
						leftBall.inAir = false;
						leftBall.active = false;
						leftPlayer.hasBall = true;
						
						rightHoop.r = 18;
						setTimeout(() => rightHoop.r = 15, 100);
					}
					
					// è½åœ°
					if (leftBall.y + leftBall.r > canvas.height) {
						leftBall.inAir = false;
						leftBall.active = false;
						leftPlayer.hasBall = true;
					}
					
					// å‡ºç•Œ
					if (leftBall.x - leftBall.r < 0 || leftBall.x + leftBall.r > canvas.width) {
						leftBall.inAir = false;
						leftBall.active = false;
						leftPlayer.hasBall = true;
					}
				}
				
				// å³ç¯®çƒ
				if (rightBall.inAir) {
					rightBall.vy += 0.3;
					rightBall.x += rightBall.vx;
					rightBall.y += rightBall.vy;
					
					// æ£€æŸ¥è¿›ç¯®ç­ï¼ˆæŠ•è¿›å·¦ç¯®ç­ï¼‰
					const dx = rightBall.x - leftHoop.x;
					const dy = rightBall.y - leftHoop.y;
					const dist = Math.sqrt(dx*dx + dy*dy);
					
					if (dist < rightBall.r + leftHoop.r && rightBall.vy > 0) {
						rightScore++;
						scoreRightEl.innerText = rightScore;
						rightBall.inAir = false;
						rightBall.active = false;
						rightPlayer.hasBall = true;
						
						leftHoop.r = 18;
						setTimeout(() => leftHoop.r = 15, 100);
					}
					
					// è½åœ°
					if (rightBall.y + rightBall.r > canvas.height) {
						rightBall.inAir = false;
						rightBall.active = false;
						rightPlayer.hasBall = true;
					}
					
					// å‡ºç•Œ
					if (rightBall.x - rightBall.r < 0 || rightBall.x + rightBall.r > canvas.width) {
						rightBall.inAir = false;
						rightBall.active = false;
						rightPlayer.hasBall = true;
					}
				}
			}

			// ç»˜åˆ¶
			function draw() {
				ctx.clearRect(0, 0, canvas.width, canvas.height);

				// ç»˜åˆ¶çƒåœº
				ctx.fillStyle = '#3a6a8a';
				ctx.fillRect(0, 0, canvas.width, canvas.height);
				
				// ä¸­çº¿
				ctx.strokeStyle = '#ffffff55';
				ctx.lineWidth = 2;
				ctx.setLineDash([10, 10]);
				ctx.beginPath();
				ctx.moveTo(canvas.width/2, 0);
				ctx.lineTo(canvas.width/2, canvas.height);
				ctx.stroke();
				ctx.setLineDash([]);

				// ç»˜åˆ¶å·¦åŠåœºæ ‡è¯†
				ctx.fillStyle = '#3b82f680';
				ctx.font = 'bold 20px sans-serif';
				ctx.fillText('ğŸ”µ', 20, 50);
				
				// ç»˜åˆ¶å³åŠåœºæ ‡è¯†
				ctx.fillStyle = '#dc262680';
				ctx.fillText('ğŸ”´', canvas.width - 50, 50);

				// ç»˜åˆ¶å·¦ç¯®ç­ï¼ˆçº¢é˜Ÿçš„ç¯®ç­ï¼Œè“é˜Ÿè¦æŠ•è¿›è¿™é‡Œï¼‰
				ctx.shadowBlur = 15;
				ctx.shadowColor = '#00000080';
				
				ctx.beginPath();
				ctx.arc(leftHoop.x, leftHoop.y, leftHoop.r, 0, Math.PI*2);
				ctx.fillStyle = '#dc2626';
				ctx.fill();
				ctx.strokeStyle = '#ffd700';
				ctx.lineWidth = 3;
				ctx.stroke();
				
				// å·¦ç¯®ç½‘
				ctx.beginPath();
				ctx.moveTo(leftHoop.x - 8, leftHoop.y + 5);
				ctx.lineTo(leftHoop.x, leftHoop.y + 18);
				ctx.lineTo(leftHoop.x + 8, leftHoop.y + 5);
				ctx.strokeStyle = '#ffffff';
				ctx.stroke();

				// ç»˜åˆ¶å³ç¯®ç­ï¼ˆè“é˜Ÿçš„ç¯®ç­ï¼Œçº¢é˜Ÿè¦æŠ•è¿›è¿™é‡Œï¼‰
				ctx.beginPath();
				ctx.arc(rightHoop.x, rightHoop.y, rightHoop.r, 0, Math.PI*2);
				ctx.fillStyle = '#3b82f6';
				ctx.fill();
				ctx.strokeStyle = '#ffd700';
				ctx.stroke();
				
				ctx.beginPath();
				ctx.moveTo(rightHoop.x - 8, rightHoop.y + 5);
				ctx.lineTo(rightHoop.x, rightHoop.y + 18);
				ctx.lineTo(rightHoop.x + 8, rightHoop.y + 5);
				ctx.strokeStyle = '#ffffff';
				ctx.stroke();

				// ç»˜åˆ¶çƒå‘˜
				// å·¦çƒå‘˜ï¼ˆè“ï¼‰
				ctx.beginPath();
				ctx.arc(leftPlayer.x, leftPlayer.y, leftPlayer.r, 0, Math.PI*2);
				ctx.fillStyle = '#3b82f6';
				ctx.fill();
				ctx.strokeStyle = '#1e3a8a';
				ctx.lineWidth = 3;
				ctx.stroke();
				
				// çƒè¡£å·ç 
				ctx.fillStyle = '#ffffff';
				ctx.font = 'bold 14px sans-serif';
				ctx.fillText('L', leftPlayer.x - 5, leftPlayer.y + 5);
				
				// å³çƒå‘˜ï¼ˆçº¢ï¼‰
				ctx.beginPath();
				ctx.arc(rightPlayer.x, rightPlayer.y, rightPlayer.r, 0, Math.PI*2);
				ctx.fillStyle = '#dc2626';
				ctx.fill();
				ctx.strokeStyle = '#991b1b';
				ctx.stroke();
				
				ctx.fillStyle = '#ffffff';
				ctx.fillText('R', rightPlayer.x - 5, rightPlayer.y + 5);

				// ç»˜åˆ¶ç¯®çƒ
				// å·¦ç¯®çƒ
				if (leftBall.active || leftPlayer.hasBall) {
					ctx.beginPath();
					ctx.arc(leftBall.x, leftBall.y, leftBall.r, 0, Math.PI*2);
					const gradient = ctx.createRadialGradient(
						leftBall.x - 2, leftBall.y - 2, 2,
						leftBall.x, leftBall.y, leftBall.r + 4
					);
					gradient.addColorStop(0, '#ff8c00');
					gradient.addColorStop(1, '#8b4513');
					ctx.fillStyle = gradient;
					ctx.fill();
					
					// ç¯®çƒé»‘çº¿
					ctx.strokeStyle = '#000000';
					ctx.lineWidth = 1;
					ctx.beginPath();
					ctx.moveTo(leftBall.x - 4, leftBall.y - 4);
					ctx.lineTo(leftBall.x + 4, leftBall.y + 4);
					ctx.moveTo(leftBall.x + 4, leftBall.y - 4);
					ctx.lineTo(leftBall.x - 4, leftBall.y + 4);
					ctx.stroke();
				}
				
				// å³ç¯®çƒ
				if (rightBall.active || rightPlayer.hasBall) {
					ctx.beginPath();
					ctx.arc(rightBall.x, rightBall.y, rightBall.r, 0, Math.PI*2);
					const gradient = ctx.createRadialGradient(
						rightBall.x - 2, rightBall.y - 2, 2,
						rightBall.x, rightBall.y, rightBall.r + 4
					);
					gradient.addColorStop(0, '#ff8c00');
					gradient.addColorStop(1, '#8b4513');
					ctx.fillStyle = gradient;
					ctx.fill();
					
					ctx.strokeStyle = '#000000';
					ctx.lineWidth = 1;
					ctx.beginPath();
					ctx.moveTo(rightBall.x - 4, rightBall.y - 4);
					ctx.lineTo(rightBall.x + 4, rightBall.y + 4);
					ctx.moveTo(rightBall.x + 4, rightBall.y - 4);
					ctx.lineTo(rightBall.x - 4, rightBall.y + 4);
					ctx.stroke();
				}

				// åˆ†æ•°
				ctx.shadowBlur = 0;
				ctx.fillStyle = '#ffffff';
				ctx.font = 'bold 30px monospace';
				ctx.fillText(leftScore, 60, 380);
				ctx.fillText(rightScore, canvas.width - 90, 380);
			}

			// æ¸¸æˆå¾ªç¯
			function gameLoop() {
				if (gameActive && gameStarted) {
					updatePlayers();
					updateHoops();
					updateBalls();
				}
				draw();
				requestAnimationFrame(gameLoop);
			}

			// è‡ªåŠ¨å¼€å§‹
			resetGame();
			gameLoop();

			// é˜»æ­¢æ»šåŠ¨
			document.body.addEventListener('touchmove', (e) => {
				if (e.target.closest('button')) {
					e.preventDefault();
				}
			}, { passive: false });
		})();
	</script>
</body>
</html>
